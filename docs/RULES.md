# ドキュメント作成ルール

このドキュメントは、プロジェクトの各種ドキュメント（REQUIREMENTS.md, PRODUCT.md, TECH.md, STRUCTURE.md, DESIGN.md）を作成するためのルールをまとめたものです。

## ドキュメント作成の推奨順序

プロジェクトドキュメントは、以下の順序で作成することを推奨します。
この順序により、上流から下流への自然な流れで文書を作成でき、各文書の責務範囲が明確に保たれます。

1. **PRODUCT.md（製品概要書）**
   - 製品のビジョンと価値提案を定める（すべての文書の礎となる）
   
2. **REQUIREMENTS.md（要求定義書）**
   - 製品ビジョンを具体的な要求に落とし込む
   
3. **TECH.md（技術仕様書）**
   - 要求を実現するための技術を選定する
   
4. **DESIGN.md（設計書）**
   - 選定した技術でどう実装するかを設計する
   
5. **STRUCTURE.md（プロジェクト構造書）**
   - 設計に基づいて物理的な構造を定義する
   
6. **TODO.md（実装計画書）**
   - 具体的な実装タスクを計画する

## ドキュメント作成時の質問推奨

ドキュメント作成時は、以下の点について積極的に質問することを推奨します。

*   **不明確な要件がある場合**：曖昧な点や解釈が分かれる部分について確認する
*   **技術選定で迷う場合**：複数の選択肢がある際は、それぞれのメリット・デメリットを提示して確認する
*   **設計方針で判断が必要な場合**：トレードオフが発生する設計上の決定について相談する
*   **既存のルールとの整合性**：プロジェクト固有の慣習やルールがある場合は事前に確認する

質問により、より正確で有用なドキュメントを作成することができます。

## ドキュメント作成の基本原則

各ドキュメントを作成する際は、以下の原則を遵守してください。

*   **明確な責務範囲:** 各ドキュメントは、そのドキュメント自身の責務範囲にのみ焦点を当て、他のドキュメントの責務範囲については記述しません。これにより、情報の混乱を防ぎ、必要な情報を見つけやすくします。
*   **情報の重複排除:** 異なるドキュメント間で同じ情報を重複して記述することを避けます。関連する情報への参照（リンクなど）を用いることで、情報の鮮度を保ち、メンテナンスコストを削減します。
*   **読者と目的の明確化:** 各ドキュメントは、誰がその情報を読むのか（読者）と、そのドキュメントが何を達成しようとしているのか（目的）を明確にします。これにより、内容の深さや表現方法が適切になります。
*   **一貫性と整合性:** ドキュメント全体で用語、フォーマット、スタイルの一貫性を保ちます。また、各ドキュメントの内容が論理的に矛盾せず、全体として整合性が取れていることを確認します。

## REQUIREMENTS.md（要求定義書）作成ルール

要求定義書は、システムが満たすべき機能要件と非機能要件を明確に定義するドキュメントです。
以下のルールに従って作成してください。

### 全体構造

```markdown
# 要求定義書

## はじめに
[プロジェクトの概要と目的を2-3段落で記述]

## 要求一覧

### 要求 [番号]
**ユーザーストーリー:** [ユーザーストーリー]

#### 受け入れ基準
1. WHEN [条件] THEN [期待される結果] SHALL
2. WHEN [条件] THEN [期待される結果] SHALL
...
```

### 記述ルール

#### はじめに セクション
*   プロジェクトの目的と概要を簡潔に記述する
*   使用する主要な技術スタック（React、TailwindCSSなど）を明記する
*   ターゲットユーザーと解決する課題を明確にする

#### 要求一覧 セクション
*   各要求には連番を付ける（要求 1, 2, 3...）
*   必ず ユーザーストーリー を含める
*   受け入れ基準 は必須とする

#### ユーザーストーリー の書き方
*   形式: `ユーザーとして、[何をしたい]ので、[なぜ/どんな価値を得たい]`
*   ユーザー視点で記述する
*   技術的な実装詳細は含めない

#### 受け入れ基準 の書き方
*   形式: `WHEN [条件/アクション] THEN [期待される結果/振る舞い] SHALL`
*   検証可能な具体的な条件を記述する
*   各基準には番号を付ける（1, 2, 3...）
*   SHALL を使用して要求の強制力を示す

### 注意事項

*   技術的な実装方法は記述しない（それは TECH.md の責務）
*   UI/UXの詳細なデザインは記述しない（それは PRODUCT.md の責務）
*   要求は機能単位でグループ化する
*   優先度が必要な場合は、要求タイトルに (P1), (P2), (P3) などを付ける

## DESIGN.md（設計書）作成ルール

設計書は、システムの技術的な設計とアーキテクチャを定義するドキュメントです。
以下のルールに従って作成してください。

### 全体構造

```markdown
# 設計書

## 概要
[システムの技術的な概要を記述]

## アーキテクチャ
[システム全体の構成を記述]

## コンポーネントとインターフェース
[各コンポーネントの詳細を記述]

## データモデル
[データ構造の定義]

## エラーハンドリング
[エラー処理方針を記述]

## テスト戦略
[テスト方針を記述]

## UI/UXデザイン
[デザインシステムを記述]

## パフォーマンス考慮事項
[最適化戦略を記述]
```

### 記述ルール

#### 概要 セクション
*   使用する技術スタックとフレームワークを明記する
*   システムの基本的な動作原理を説明する
*   データの永続化方法を記述する

#### アーキテクチャ セクション
*   フロントエンド/バックエンドの構成を記述する
*   使用するライブラリとバージョンを明記する
*   コンポーネントの階層構造を図示する
*   ビルドツールと開発環境を記載する

#### コンポーネントとインターフェース セクション
*   各コンポーネントの責任を明確に定義する
*   Props、State、Methodsを詳細に記述する
*   コンポーネント間の依存関係を示す
*   TypeScriptの型定義を含める

#### データモデル セクション
*   インターフェースや型定義を記述する
*   データベーススキーマを定義する
*   ストレージ形式（LocalStorage等）を明記する
*   データの正規化方針を記載する

#### エラーハンドリング セクション
*   入力値のバリデーションルールを定義する
*   エラー時の処理フローを記述する
*   ユーザーへのフィードバック方法を明記する
*   例外処理の方針を記載する

#### テスト戦略 セクション
*   使用するテストフレームワークを明記する
*   単体テスト・統合テストの範囲を定義する
*   テストカバレッジの目標を設定する
*   品質管理ツール（Linter等）を記載する

#### UI/UXデザイン セクション
*   デザインシステムとカラーパレットを定義する
*   レイアウト構造とレスポンシブ対応を記述する
*   アクセシビリティ要件を明記する
*   インタラクションデザインを記載する

#### パフォーマンス考慮事項 セクション
*   最適化戦略を具体的に記述する
*   バンドルサイズの最適化方法を記載する
*   遅延読み込みやキャッシュ戦略を定義する
*   パフォーマンス測定基準を設定する

### 注意事項

*   実装の詳細コードは含めない（サンプルコードは最小限に）
*   ビジネス要件は記述しない（それは REQUIREMENTS.md の責務）
*   製品の詳細な仕様は記述しない（それは PRODUCT.md の責務）
*   技術的な判断理由を明記する

## PRODUCT.md（製品概要書）作成ルール

製品概要書は、製品のビジョン、主要機能、ユーザー体験の目標を定義するドキュメントです。
以下のルールに従って作成してください。

### 全体構造

```markdown
# 製品概要

[製品の簡潔な説明と価値提案]

## 主要機能
[製品の中核となる機能のリスト]

## ユーザー体験目標
[UXの目標と原則]

## 技術的アプローチ
[技術的な方向性の概要]
```

### 記述ルール

#### 製品概要 セクション
*   製品の価値提案を1-2段落で明確に記述する
*   誰のための製品かを明記する
*   解決する課題や提供する価値を説明する
*   使用する主要技術を簡潔に言及する

#### 主要機能 セクション
*   ユーザーが実行できる主要なアクションを列挙する
*   機能の優先順位を暗黙的に示す（重要な順に記載）
*   各機能を簡潔に説明する（1行程度）
*   技術的な実装詳細は含めない

#### ユーザー体験目標 セクション
*   製品が目指すユーザー体験を定義する
*   ユーザビリティの原則を明記する
*   アクセシビリティ基準を記載する
*   デバイス対応方針を説明する

#### 技術的アプローチ セクション
*   アーキテクチャの基本方針を記述する
*   データ管理の方針を説明する
*   スケーラビリティや保守性の考慮を記載する
*   詳細な技術仕様は含めない（概要レベルに留める）

### 記述のポイント

*   **ユーザー視点で記述する**：技術者ではなくユーザーの言葉を使う
*   **簡潔さを保つ**：各セクションは必要最小限の情報に留める
*   **ビジョンを伝える**：製品が目指す理想的な状態を描く
*   **測定可能な目標を含める**：可能な限り具体的な指標を含める

### 注意事項

*   詳細な要求仕様は記述しない（それは REQUIREMENTS.md の責務）
*   技術的な設計詳細は記述しない（それは DESIGN.md の責務）
*   実装手順は記述しない（それは TECH.md の責務）
*   製品の「なぜ」と「何」に焦点を当てる

## TECH.md（技術仕様書）作成ルール

技術仕様書は、プロジェクトで使用する技術スタック、開発ツール、実行コマンドを定義するドキュメントです。
以下のルールに従って作成してください。

### 全体構造

```markdown
# 技術スタック

## コア技術
[主要な技術とフレームワーク]

## 開発ツール
[開発に使用するツール]

## データ＆状態管理
[データ管理方法]

## 共通コマンド
[よく使うコマンド一覧]

## ブラウザサポート
[対応ブラウザと要件]
```

### 記述ルール

#### コア技術 セクション
*   使用する主要技術とバージョンを明記する
*   各技術の採用理由を簡潔に説明する
*   技術選定の根拠を含める
*   公式ドキュメントへのリンクを含めても良い

#### 開発ツール セクション
*   Linter、Formatter、テストツールなどを列挙する
*   各ツールの役割を明確に説明する
*   設定ファイルの場所を明記する
*   推奨される拡張機能やプラグインを記載する

#### データ＆状態管理 セクション
*   状態管理の方法を説明する
*   データ永続化の仕組みを記述する
*   カスタムフックやユーティリティの用途を説明する
*   データフローの概要を記載する

#### 共通コマンド セクション
*   開発、テスト、ビルドの各コマンドを記載する
*   コマンドはコードブロックで記述する
*   各コマンドの用途を説明する
*   環境別のコマンドを区別する

#### ブラウザサポート セクション
*   対応ブラウザとバージョンを明記する
*   必須の Web API を列挙する
*   レスポンシブ対応の範囲を記載する
*   非対応環境への対処方針を説明する

### コマンド記述の形式

```bash
# コマンドの説明
npm run [コマンド名]

# 実行例（必要に応じて）
npm run dev -- --port 3001
```

### 記述のポイント

*   **実用性を重視**：開発者がすぐに使える情報を提供する
*   **バージョン管理**：技術のバージョンを明記する
*   **依存関係の明確化**：技術間の依存関係を示す
*   **更新頻度を考慮**：変更が頻繁な情報は最小限にする

### 注意事項

*   アーキテクチャの詳細は記述しない（それは DESIGN.md の責務）
*   ビジネス要件は記述しない（それは REQUIREMENTS.md の責務）
*   製品機能は記述しない（それは PRODUCT.md の責務）
*   実装に必要な具体的な技術情報に焦点を当てる

## STRUCTURE.md（プロジェクト構造書）作成ルール

プロジェクト構造書は、プロジェクトのディレクトリ構成、ファイル配置、命名規則を定義するドキュメントです。
以下のルールに従って作成してください。

### 全体構造

```markdown
# プロジェクト構造

## ルートディレクトリ構成
[プロジェクトのトップレベル構造]

## ソースコード構成
[src/ディレクトリの詳細構造]

## コンポーネントアーキテクチャ
[コンポーネントの階層と責務]

## ファイル命名規則
[各種ファイルの命名ルール]

## インポート構成
[import文の記述順序]

## テスト構造
[テストファイルの配置]
```

### 記述ルール

#### ルートディレクトリ構成 セクション
*   プロジェクトのトップレベル構造をツリー形式で表示する
*   各ディレクトリ・ファイルの用途を簡潔に説明する
*   設定ファイルの役割を明記する
*   コードブロックを使用して視覚的に表現する

#### ソースコード構成 セクション
*   src/ディレクトリ内の詳細構造を記述する
*   各ディレクトリの責務を明確にする
*   主要なファイルの役割を説明する
*   階層関係を明確に示す

#### コンポーネントアーキテクチャ セクション
*   コンポーネントの階層構造を説明する
*   各コンポーネントの責務を定義する
*   データフローとイベントフローを記述する
*   再利用性の方針を明記する

#### ファイル命名規則 セクション
*   ファイルタイプごとの命名規則を定義する
*   大文字・小文字の使い分けを明確にする
*   拡張子の使い分けを説明する
*   具体例を含める

#### インポート構成 セクション
*   import文の記述順序を定義する
*   グループ分けのルールを明記する
*   相対パス・絶対パスの使い分けを説明する
*   ESLintなどの自動整形ルールとの整合性を考慮する

#### テスト構造 セクション
*   テストファイルの配置場所を定義する
*   テストの種類別の構成を説明する
*   テストユーティリティの配置を明記する
*   命名規則を含める

### ツリー表示の形式

```
ディレクトリ名/
├── ファイル名          # 説明
├── ディレクトリ名/     # 説明
│   ├── ファイル名      # 説明
│   └── ファイル名      # 説明
└── ファイル名          # 説明
```

### 記述のポイント

*   **視覚的な明確さ**：ツリー構造で直感的に理解できるようにする
*   **一貫性の維持**：命名規則は例外なく適用する
*   **拡張性の考慮**：将来の拡張を想定した構造にする
*   **標準への準拠**：言語やフレームワークの標準的な構成に従う

### 注意事項

*   実装の詳細は記述しない（それは各ソースファイルの責務）
*   ビジネスロジックは記述しない（それは DESIGN.md の責務）
*   技術選定の理由は記述しない（それは TECH.md の責務）
*   構造と配置のルールに焦点を当てる

## TODO.md（実装計画書）作成ルール

実装計画書は、要求定義書に基づいて具体的な実装タスクと順序を定義するドキュメントです。
以下のルールに従って作成してください。

### 全体構造

```markdown
# 実装計画

## [タスク番号]. [タスクのタイトル]
  - [具体的な実装内容の説明]
  - [使用する技術やツールの記載]
  - [関連する要件への参照]
  - _要件: [関連する要求番号]_
```

### 記述ルール

#### タスク定義
*   各タスクには連番を付ける（1, 2, 3...）
*   タスクは実装の論理的な順序に従って並べる
*   依存関係がある場合は順序で表現する
*   各タスクは独立して実行可能な単位にする

#### チェックボックス形式
*   各タスクの先頭に `- [ ]` を付けて、完了時にチェックできるようにする
*   インデント（2スペース）を使用して階層構造を表現する
*   サブタスクが必要な場合は、さらにインデントを追加する

#### タスク内容の記述
*   何を実装するかを具体的に記述する
*   使用する主要な技術やライブラリを明記する
*   実装の範囲を明確にする
*   関連する要求定義への参照を含める

#### 要件参照
*   各タスクの最後に `_要件: [番号]_` の形式で関連する要求を参照する
*   複数の要件に関連する場合はカンマ区切りで記載する
*   全体的な基盤に関わるタスクは「全体的な基盤」と記載する

### 記述のポイント

*   **実装可能な粒度**：各タスクは1〜2日で完了できる程度の粒度にする
*   **技術的な具体性**：使用する技術やツールを明確に記載する
*   **進捗の可視性**：チェックボックスで進捗が一目でわかるようにする
*   **トレーサビリティ**：要求定義との関連を明確にする

### 記述例

```markdown
# 実装計画
 
- [ ] 1. プロジェクトのセットアップと基本構造の作成
  - Vite を使用して React + TypeScript プロジェクトを初期化
  - TailwindCSS、Vitest、oxlint の設定とインストール
  - 基本的なディレクトリ構造とファイルの作成
  - _要件: 全体的な基盤_
 
- [ ] 2. データモデルとユーティリティ関数の実装
  - Todo インターフェースと FilterType の型定義を作成
  - localStorage との連携ユーティリティ関数を実装
  - UUID生成やデータバリデーション関数を作成
  - _要件: 1.1, 2.1, 2.2_
```

### 注意事項

*   詳細な実装コードは記述しない（それは実際のソースコードの責務）
*   ビジネス要件は記述しない（それは REQUIREMENTS.md の責務）  
*   技術的な設計詳細は記述しない（それは DESIGN.md の責務）
*   実装の「何を」と「どの順序で」に焦点を当てる